<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>GraphQL | Nodal</title>
  <meta name="viewport" content="width=device-width">
  <meta property="og:title" content="GraphQL | Nodal">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://facebook.github.io/nodal/docs/graphql.html">
  <meta property="og:image" content="www.nodaljs.com/static/images/favicon_blue.png">
  <meta property="og:description" content="Node.js web servers optimized for building API services quickly and efficiently.">
  <meta property="fb:app_id" content="623268441017527">

  <link rel="shortcut icon" href="www.nodaljs.com/static/images/favicon_blue.png">
  <link rel="alternate" type="application/rss+xml" title="Nodal" href="https://facebook.github.io/nodal/feed.xml">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" />
  <link rel="stylesheet" href="/nodal/css/syntax.css">
  <link rel="stylesheet" href="/nodal/css/codemirror.css">
  <link rel="stylesheet" href="/nodal/css/react.css">

  <script src="//use.typekit.net/vqa1hcx.js"></script>
  <script>try{Typekit.load();}catch(e){}</script>

  <!--[if lte IE 8]>
  <script src="/nodal/js/html5shiv.min.js"></script>
  <script src="/nodal/js/es5-shim.min.js"></script>
  <script src="/nodal/js/es5-sham.min.js"></script>
  <![endif]-->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
  <script src="/nodal/js/codemirror.js"></script>
  <script src="/nodal/js/javascript.js"></script>
  <script src="/nodal/js/react.js"></script>
  <script src="/nodal/js/react-dom.js"></script>
  <script src="/nodal/js/babel-browser.min.js"></script>
  <script src="/nodal/js/live_editor.js"></script>
  <script src="/nodal/js/browser_cuid.js"></script>

</head>
<body>

  <div class="container">

    <div class="nav-main">
      <div class="wrap">
        <a class="nav-home" href="/nodal/index.html">
          <img class="nav-logo" src="/nodal/img/logo_light.png" width="36" height="36">
          Nodal
        </a>
        <ul class="nav-site nav-site-internal">
          <li><a href="/nodal/docs/getting-started.html" class="active">Docs</a></li>
          <li><a href="/nodal/support.html">Support</a></li>
          <li><a href="/nodal/downloads.html">Download</a></li>
          <li><a href="/nodal/blog/">Blog</a></li>
          <li>
            <input id="algolia-doc-search" type="text" placeholder="Search docs..." />
          </li>
        </ul>

        <ul class="nav-site nav-site-external">
          <li><a href="https://github.com/keithwhor/nodal">GitHub</a></li>
          <li><a href="http://www.polybit.com/">Polybit</a></li>
        </ul>
      </div>
    </div>

    

    <section class="content wrap documentationContent">
  <div class="nav-docs">
  <!-- Docs Nav -->
  
    <div class="nav-docs-section">
      <h3>Quick Start</h3>
      <ul>
        
          <li>
            <a href="/nodal/docs/getting-started.html">Getting Started</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/tutorial.html">Tutorial</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/thinking-in-nodal.html">Thinking in Nodal</a>
            
          </li>
        
      </ul>
    </div>
  
    <div class="nav-docs-section">
      <h3>Guides</h3>
      <ul>
        
          <li>
            <a href="/nodal/docs/why-nodal.html">Why Nodal?</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/graphql.html" class="active">GraphQL</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/conditional-joins.html">Conditional Joins</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/strong-parameters.html">Strong Parameters</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/sensitive-fields.html">Sensitive Fields</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/stateless-architecture.html">Stateless Architecture</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/tests-as-first-class-citizens.html">Tests As First Class Citizens</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/deep-joins.html">Deep Joins</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/cascading-joins.html">Cascading Joins</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/database-seeds.html">Database Seeds</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/middleware.html">Middleware</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/renderware.html">Renderware</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/scheduled-tasks.html">Scheduled Tasks</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/pg-json-support.html">PG json Support</a>
            
          </li>
        
      </ul>
    </div>
  
    <div class="nav-docs-section">
      <h3>Community Resources</h3>
      <ul>
        
          <li>
            <a href="/nodal/docs/videos.html">Videos</a>
            
          </li>
        
      </ul>
    </div>
  
    <div class="nav-docs-section">
      <h3>Reference</h3>
      <ul>
        
          <li>
            <a href="/nodal/docs/top-level-api.html">Top-Level API</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/generator-api.html">Generator API</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/database-api.html">Database API</a>
            
          </li>
        
          <li>
            <a href="/nodal/docs/glossary.html">Nodal Terminology</a>
            
          </li>
        
      </ul>
    </div>
  

  <!-- Tips Nav -->
  
</div>


  <div class="inner-content">
    <a class="edit-page-link" href="https://github.com/keithwhor/nodal/tree/master/docs/docs/02-graphql.md" target="_blank">Edit on GitHub</a>
    <h1>
      GraphQL
    </h1>
    <div class="subHeader"></div>

    <p>To begin with, we&#39;re proud to announce that Nodal has started supporting GraphQL as an interface layer between your PostgreSQL database and your endpoints, giving the client full control over the data they retrieve (if you&#39;d like to enable it). We&#39;re a little bit unique in our implementation and still working out some details, but querying is a go!</p>

<p>If you&#39;re unfamiliar with the GraphQL specification, you&#39;re welcome to check out <a href="https://learngraphql.com/basics/introduction">a brief introduction to GraphQL</a>.</p>

<p>Using GraphQL to fetch model data or manipulate responses is easy. In any Controller, you can just use;</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">GraphQuery</span> <span class="o">=</span> <span class="nx">Nodal</span><span class="p">.</span><span class="nx">GraphQuery</span><span class="p">;</span>

<span class="nx">GraphQuery</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">models</span><span class="p">,</span> <span class="nx">format</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">respond</span><span class="p">(</span><span class="nx">err</span> <span class="o">||</span> <span class="nx">models</span><span class="p">,</span> <span class="nx">format</span><span class="p">);</span>

<span class="p">});</span>
</code></pre></div>
<p>Where models are the full models fetched, and format is the format (which fields to show) of your models.</p>

<p>If you wanted to query your users and get some data, you might do the following;</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">GraphyQuery</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span>
  <span class="s1">&#39;users { id, username, email }&#39;</span><span class="p">,</span>
  <span class="mi">0</span><span class="p">,</span>
  <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">models</span><span class="p">,</span> <span class="nx">format</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">respond</span><span class="p">(</span><span class="nx">err</span> <span class="o">||</span> <span class="nx">models</span><span class="p">,</span> <span class="nx">format</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div>
<p>If you wanted to choose a specific user and join in some posts...</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">GraphyQuery</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span>
  <span class="s1">&#39;users(id: 7) { id, username, posts { body } }&#39;</span><span class="p">,</span>
  <span class="mi">0</span><span class="p">,</span>
  <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">models</span><span class="p">,</span> <span class="nx">format</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">respond</span><span class="p">(</span><span class="nx">err</span> <span class="o">||</span> <span class="nx">models</span><span class="p">,</span> <span class="nx">format</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div>
<p>The number (0) in this case specifies the max depth to traverse. Setting 0 means queries can have unlimited depth.</p>


    <div class="docs-prevnext">
      
      
        <a class="docs-next" href="/nodal/docs/using-generators.html">Next &rarr;</a>
      
    </div>
  </div>
</section>


    <footer class="wrap">
      <div class="left">
        Made in Toronto + San Francisco<br>
        <a href="/nodal/acknowledgements.html">Acknowledgements</a>
      </div>
      <div class="right">
        &copy; 2016 Keith Horwood<br>
        Documentation licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.
      </div>
    </footer>
  </div>
  <div id="fb-root"></div>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-41298772-1', 'facebook.github.io');
    ga('send', 'pageview');

    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=623268441017527";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

    docsearch({
      apiKey: '36221914cce388c46d0420343e0bb32e',
      indexName: 'nodal',
      inputSelector: '#algolia-doc-search'
    });
  </script>
</body>
</html>
